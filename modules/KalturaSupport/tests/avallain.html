
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
	  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	  <title>Vidiun</title>
	  <script type="text/javascript" src="http://solisoft.net/avallain/lib/third-party/jquery-1.7.1.min.js"></script>
	  <script type="text/javascript" src="http://www.vidiun.com/p/1017902/sp/1126929100/embedIframeJs/uiconf_id/11098452/partner_id/1269291"></script>
    
  </head>
  <body>
    <script>
      
      var vdp;
      var seekandplay = false;
      
      window["playerSeekEnd"] = function(val) {
        $("#logs").prepend("<div>Seek END: "+val+"</div>");
        if(seekandplay) {
          setTimeout(function() {
            vdp.sendNotification("doPlay");
          }, 500);
        }
        seekandplay = false;
      }
      window["playerSeekStart"] = function(val) {
        $("#logs").prepend("<div>Seek START: "+val+"</div>");
      }
      window["playerStateChange"] = function(val) {
        $("#logs").prepend("<div>playerStateChange:   "+val+"</div>");
      }
      window["playerUpdatePlayhead"] = function(val) {
        $("#logs").prepend("<div>playerUpdatePlayhead: "+val+"</div>");
      }
      window["vdpReady"] = function(val) {
        $("#logs").prepend("<div>vdpReady: "+val+"</div>");
      }
      
      
      $(function() {
        mw.setConfig("VidiunSupport.LeadWithHTML5", true);
        vWidget.embed({
        	'targetId': "testaudio",
        	'partnerId': '1269291',
        	'wid': '_1269291',
        	'uiconf_id' : '11098452',
        	'entry_id' : '1_cv89hd39',
        	'width': 200+"px",
        	'height': 200+"px",
        	'flashvars':{
        		'externalInterfaceDisabled' : false,
        		'autoPlay' : false,
        		'EmbedPlayer.ControlsHeight': 0,
        		'EmbedPlayer.OverlayControls': false
          },
          readyCallback: function( pID ){
    	      vdp = document.getElementById(pID);
    	      vdp.addJsListener("playerSeekEnd", "playerSeekEnd");
    	      vdp.addJsListener("playerSeekStart", "playerSeekStart");
    	      vdp.addJsListener("playerStateChange", "playerStateChange");    	   
            vdp.addJsListener("playerUpdatePlayhead", "playerUpdatePlayhead");    	   
            vdp.addJsListener("vdpReady", "vdpReady");    	   
               
	        }
        });	
        $("#play").on("click", function() {
          vdp.sendNotification("doPlay");          
        });
        $("#pause").on("click", function() {
          vdp.sendNotification("doPause");          
        });
        $("#seek").on("click", function() {
          seekandplay = true;
          vdp.sendNotification("doSeek", 7);         
       
        });
        $("#seek2").on("click", function() {
          vdp.sendNotification("doStop"); 
          setTimeout(function() {
            seekandplay = true;
            vdp.sendNotification("doSeek", 17);         
          }, 500);        
          
         
        });
        
        $("#stop").on("click", function() {
          vdp.sendNotification("doStop");
        });
        
      });
    </script>
    <table width="100%">
      <tr>
        <td width="300">
          <div id='testaudio'></div>
          <div>
            <div><a href="#" id="play">Play</a></div>
            <div><a href="#" id="pause">Pause</a></div>
            <div><a href="#" id="seek">Seek at 7s then Play</a></div>
            <div><a href="#" id="seek2">doStop, Seek at 17s then Play</a></div>
            <div><a href="#" id="stop">Stop</a></div>
          </div>
        </td>
        <td style="background: lightyellow; ">
          <div id="logs" style="height: 400px; overflow: scroll;"></div>
        </td>
      </tr>
    </table>
    <h4>Issues</h4>
    <strong>In firefox :</strong>
    <p>Widget looks better and seems to work as expected</p>
    <strong>IE8 (flash player) 3.6.16:</strong>
    <ul>
      <li>Sometimes, doStop do sa seek 0 and play from 0 (it just don't stop)</li>
      <li>Sometimes "Seek at 7s then Play" seek and play (after a 500ms timeout) but finaly it's paused ...</li>

    </ul>
    
  </body>
</html>
